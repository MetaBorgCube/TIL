module interpreter/run

imports
  strategolib
  interpreter/eval-stats

strategies
  til-run: (program, inputs) -> result
    where {| ReadInput:
      rules(ReadInput: _ -> inputs)
    ; result := <eval-program(EvalReadDR)> program
    |}

  EvalReadDR: _ -> line
    where
      [line | inputs] := <ReadInput>
    ; rules(ReadInput: _ -> inputs)

  eval-program(eval-read) = 
    ?Program(<eval-stats(eval-read)>)
